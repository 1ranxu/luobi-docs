# LuoBI

## é¡¹ç›®ä»‹ç»

**BIï¼ˆå•†ä¸šæ™ºèƒ½ï¼‰ï¼š**æ•°æ®å¯è§†åŒ–ï¼ŒæŠ¥è¡¨å¯è§†åŒ–ç³»ç»Ÿ

**ä¸»æµBIï¼š**

- å¸†è½¯BI https://www.finebi.com
- å°é©¬BI https://bi.zhls.qq.com
- PowerBI https://powerbi.microsoft.com/zh-cn 

**ä¼ ç»ŸBIï¼š**

https://chartcube.alipay.com

1. éœ€è¦äººå·¥ä¸Šä¼ æ•°æ®
2. éœ€è¦äººå·¥é€‰æ‹©æ•°æ®çš„è¡Œå’Œåˆ—è¿›è¡Œåˆ†æï¼ˆæ•°æ®åˆ†æå¸ˆï¼‰
3. éœ€è¦äººå·¥é€‰æ‹©å›¾è¡¨ç±»å‹ï¼ˆæ•°æ®åˆ†æå¸ˆï¼‰
4. ç”Ÿæˆå›¾è¡¨ï¼ˆä¿å­˜é…ç½®ï¼‰

**æ™ºèƒ½BIå¹³å°ï¼š**

1. ç”¨æˆ·ï¼ˆæ•°æ®åˆ†æè€…ï¼‰åªéœ€è¦å¯¼å…¥åŸå§‹æ•°æ®ï¼Œè¾“å…¥æƒ³è¦åˆ†æçš„ç›®æ ‡ï¼ˆæ¯”å¦‚â€å¸®æˆ‘åˆ†æä»¥ä¸‹ç½‘ç«™çš„ç”¨æˆ·å¢é•¿è¶‹åŠ¿â€œï¼‰ï¼Œå°±èƒ½åˆ©ç”¨AIè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªç¬¦åˆè¦æ±‚çš„å›¾è¡¨ä»¥åŠç»“è®º
2. ä¸ä¼šæ•°æ®åˆ†æçš„ç”¨æˆ·ï¼Œä¹Ÿèƒ½é€šè¿‡è¾“å…¥ç›®æ ‡å¿«é€Ÿå®Œæˆæ•°æ®åˆ†æï¼Œå¤§å¹…èŠ‚çº¦äººåŠ›æˆæœ¬

## éœ€æ±‚åˆ†æ

1. æ™ºèƒ½åˆ†æï¼šç”¨æˆ·è¾“å…¥ç›®æ ‡ï¼ŒåŸå§‹æ•°æ®å’Œå…¶ä»–å‚æ•°ï¼ˆå¦‚å›¾è¡¨ç±»å‹ï¼‰ï¼Œå¯ä»¥è‡ªåŠ¨ç”Ÿæˆå›¾è¡¨å’Œç»“è®º
2. å›¾è¡¨ç®¡ç†
3. å›¾è¡¨ç”Ÿæˆçš„å¼‚æ­¥åŒ–ï¼ˆæ¶ˆæ¯é˜Ÿåˆ— ï¼‰
4. å¯¹æ¥ AI 

## æ¶æ„å›¾

![image-20231030214212882](assets/image-20231030214212882.png)

## æŠ€æœ¯é€‰æ‹©

**å‰ç«¯ï¼š**

- React
- Ant Design Pro
- Umi
- ECharts å¯è§†åŒ–å¼€å‘åº“
- umi openapi ä»£ç ç”Ÿæˆï¼ˆè‡ªåŠ¨ç”Ÿæˆåç«¯è°ƒç”¨ä»£ç ï¼‰

**åç«¯ï¼š**

- Spring Bootï¼ˆä¸‡ç”¨ Java åç«¯é¡¹ç›®æ¨¡æ¿ï¼‰
- MySQL
- MyBatis Plus
- RabbitMQ
- AI èƒ½åŠ›ï¼ˆOpen AI æ¥å£å¼€å‘/ ä½¿ç”¨ç°æˆçš„ AI æ¥å£ï¼‰
- EasyExcelï¼ˆExcel çš„ä¸Šä¼ å’Œæ•°æ®çš„è§£æï¼‰
- Swagger + Knife4j
- Hutool

## è®¡åˆ’

**åˆå§‹åŒ–**

- å‰ç«¯
- åç«¯

**åç«¯**

- æ•°æ®åº“è¡¨è®¾è®¡
- è‡ªåŠ¨ç”Ÿæˆå¢åˆ æ”¹æŸ¥ä»£ç 
- å›¾è¡¨ç®¡ç†
- æ–‡ä»¶ä¸Šä¼ 

**å‰ç«¯**

- è‡ªåŠ¨ç”Ÿæˆåç«¯è°ƒç”¨ä»£ç 
- ä¿®æ”¹requestErrorConfig

- ç™»å½•åŠŸèƒ½
- å›¾è¡¨åˆ†æé¡µé¢
- å›¾è¡¨ç®¡ç†é¡µé¢

## åˆå§‹åŒ–

### å‰ç«¯

https://pro.ant.design/

1. åˆ›å»ºé¡¹ç›®

```sh
# ä½¿ç”¨ npmï¼Œ
npm i @ant-design/pro-cli -g
pro create luobi-frontend
```

![image-20231031101557449](assets/image-20231031101557449.png)

2. å®‰è£…ä¾èµ–

```
yarn
```

![image-20231031102623399](assets/image-20231031102623399.png)

3. å»é™¤å›½é™…åŒ–

![image-20231031105510481](assets/image-20231031105510481.png)

[ğŸ› [BUG\] æ‰§è¡Œåˆ é™¤å›½é™…åŒ–å‘½ä»¤æŠ¥é”™ Â· Issue #10452 Â· ant-design/ant-design-pro (github.com)](https://github.com/ant-design/ant-design-pro/issues/10452)

![image-20231031105637111](assets/image-20231031105637111.png)

```sh
yarn add eslint-config-prettier --dev yarn add eslint-plugin-unicorn --dev 
```

![image-20231031105714817](assets/image-20231031105714817.png)

![image-20231031105729743](assets/image-20231031105729743.png)

å†æ¬¡æ‰§è¡Œå»é™¤å›½é™…åŒ–å°±èƒ½æˆåŠŸäº†

![image-20231031105849430](assets/image-20231031105849430.png)



### åç«¯

1. ä½¿ç”¨åç«¯é¡¹ç›®æ¨¡æ¿

å¤åˆ¶æ¨¡æ¿ï¼Œä¿®æ”¹ç›®å½•åä¸ºé¡¹ç›®å

2. è¿æ¥æ•°æ®åº“

   ![image-20231031113006757](assets/image-20231031113006757.png)

3. ä¿®æ”¹æ•°æ®åº“å

![image-20231031113312177](assets/image-20231031113312177.png)

4. ä¿®æ”¹é¡¹ç›®å

![image-20231031113526512](assets/image-20231031113526512.png)

![image-20231031113636977](assets/image-20231031113636977.png)

5. å¼€å¯åˆ†å¸ƒå¼session

![image-20231031114027856](assets/image-20231031114027856.png)

![image-20231031114048256](assets/image-20231031114048256.png)

6. ä¿®æ”¹ç«¯å£

![image-20231031114227436](assets/image-20231031114227436.png)

7. å¯åŠ¨å¹¶è®¿é—®æ¥å£æ–‡æ¡£

![image-20231031114401762](assets/image-20231031114401762.png)

## åç«¯

### æ•°æ®åº“è¡¨è®¾è®¡

**ç”¨æˆ·è¡¨ï¼š**

```sql
create table if not exists user
(
    id           bigint auto_increment comment 'id' primary key,
    userAccount  varchar(256)                           not null comment 'è´¦å·',
    userPassword varchar(512)                           not null comment 'å¯†ç ',
    userName     varchar(256)                           null comment 'ç”¨æˆ·æ˜µç§°',
    userAvatar   varchar(1024)                          null comment 'ç”¨æˆ·å¤´åƒ',
    userProfile  varchar(512)                           null comment 'ç”¨æˆ·ç®€ä»‹',
    userRole     varchar(256) default 'user'            not null comment 'ç”¨æˆ·è§’è‰²ï¼šuser/admin/ban',
    gender       tinyint                                null comment 'æ€§åˆ«',
    createTime   datetime     default CURRENT_TIMESTAMP not null comment 'åˆ›å»ºæ—¶é—´',
    updateTime   datetime     default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP comment 'æ›´æ–°æ—¶é—´',
    isDelete     tinyint      default 0                 not null comment 'æ˜¯å¦åˆ é™¤',
    index idx_userAccount (userAccount)
) comment 'ç”¨æˆ·' collate = utf8mb4_unicode_ci;
```

**å›¾è¡¨ä¿¡æ¯è¡¨ï¼š**

```sql
-- å›¾è¡¨ä¿¡æ¯è¡¨
create table if not exists chart
(
    id         bigint auto_increment comment 'id' primary key,
    goal       text                               null comment 'åˆ†æç›®æ ‡',
    rawData    text                               null comment 'åŸå§‹æ•°æ®',
    chartType  varchar(128)                       null comment 'å›¾è¡¨ç±»å‹',
    genChart   text                               null comment 'AIç”Ÿæˆçš„å›¾è¡¨æ•°æ®',
    genSummary text                               null comment 'AIç”Ÿæˆçš„åˆ†ææ€»ç»“',
    userId     bigint                             null comment 'åˆ›å»ºäººid',
    createTime datetime default CURRENT_TIMESTAMP not null comment 'åˆ›å»ºæ—¶é—´',
    updateTime datetime default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP comment 'æ›´æ–°æ—¶é—´',
    isDelete   tinyint  default 0                 not null comment 'æ˜¯å¦åˆ é™¤'
) comment 'å›¾è¡¨ä¿¡æ¯' collate = utf8mb4_unicode_ci;
```

### è‡ªåŠ¨ç”Ÿæˆå¢åˆ æ”¹æŸ¥ä»£ç 

![image-20231031141404931](assets/image-20231031141404931.png)

![image-20231031141439155](assets/image-20231031141439155.png)

![image-20231031141503920](assets/image-20231031141503920.png)

1. ç”Ÿæˆçš„UserServiceå’ŒUserServiceImplä¸ç”¨æ›¿æ¢åŸæ¥çš„

2. ä¿®æ”¹å­—æ®µçš„æ³¨è§£

   ![image-20231031142728852](assets/image-20231031142728852.png)

   ![image-20231031142744734](assets/image-20231031142744734.png)

   ![image-20231031142801435](assets/image-20231031142801435.png)

   ![image-20231031142813281](assets/image-20231031142813281.png)

3. åˆ æ‰UserServiceå’ŒUserServiceImplå’ŒUserControllerä¸­ç”¨ä¸åˆ°çš„æ–¹æ³•

   ![image-20231031143327862](assets/image-20231031143327862.png)

   ![image-20231031143356282](assets/image-20231031143356282.png)

   ![image-20231031143538773](assets/image-20231031143538773.png)

4. åˆ æ‰å¾®ä¿¡å…¬ä¼—å·å¼€å‘åŒ…

   ![image-20231031143643260](assets/image-20231031143643260.png)

5. åˆ æ‰WxMPController

   ![image-20231031143826847](assets/image-20231031143826847.png)

### å›¾è¡¨ç®¡ç†

1. å¤åˆ¶PostControllerä¿®æ”¹æˆChartController

   ![image-20231031145120748](assets/image-20231031145120748.png)

   ![image-20231031145230166](assets/image-20231031145230166.png)

   ![image-20231031145445986](assets/image-20231031145445986.png)  

2. åˆ›å»ºå…³äºChartçš„DTOç±»

   ![image-20231031153057014](assets/image-20231031153057014.png)

3. å‰ªè£ChartControllerå¹¶ä¸ºChartServiceæä¾›getQueryWrapperæ–¹æ³•

   ```java
   /**
   * @author è½æ¨±çš„æ‚”æ¨
   * @description é’ˆå¯¹è¡¨ã€chart(å›¾è¡¨ä¿¡æ¯è¡¨)ã€‘çš„æ•°æ®åº“æ“ä½œServiceå®ç°
   * @createDate 2023-10-31 14:16:29
   */
   @Service
   public class ChartServiceImpl extends ServiceImpl<ChartMapper, Chart>
       implements ChartService{
   
       /**
        * è·å–æŸ¥è¯¢åŒ…è£…ç±»
        *
        * @param chartQueryRequest
        * @return
        */
       @Override
       public QueryWrapper<Chart> getQueryWrapper(ChartQueryRequest chartQueryRequest) {
           QueryWrapper<Chart> queryWrapper = new QueryWrapper<>();
           if (chartQueryRequest == null) {
               return queryWrapper;
           }
           Long id = chartQueryRequest.getId();
           Long userId = chartQueryRequest.getUserId();
           String goal = chartQueryRequest.getGoal();
           String chartType = chartQueryRequest.getChartType();
           String sortField = chartQueryRequest.getSortField();
           String sortOrder = chartQueryRequest.getSortOrder();
           // æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶
           queryWrapper.eq(id != null && id > 0, "id", id);
           queryWrapper.eq(ObjectUtils.isNotEmpty(userId), "userId", userId);
           queryWrapper.like(StringUtils.isNotEmpty(goal),"goal",goal);
           queryWrapper.like(StringUtils.isNotEmpty(chartType),"chartType",chartType);
           queryWrapper.eq("isDelete", false);
           queryWrapper.orderBy(SqlUtils.validSortField(sortField), sortOrder.equals(CommonConstant.SORT_ORDER_ASC),
                   sortField);
           return queryWrapper;
       }
   }
   ```

   

   

## å‰ç«¯

### è‡ªåŠ¨ç”Ÿæˆåç«¯è°ƒç”¨ä»£ç 

![image-20231031161114725](assets/image-20231031161114725.png)

![image-20231031161044255](assets/image-20231031161044255.png)

![image-20231031161225991](assets/image-20231031161225991.png)

![image-20231031160739020](assets/image-20231031160739020.png)

### ä¿®æ”¹requestErrorConfig

![image-20231005160127336](assets/image-20231005160127336.png)

![image-20231005160035130](assets/image-20231005160035130.png)

![image-20231005170916555](assets/image-20231005170916555.png)

![image-20231007102657764](assets/image-20231007102657764.png)

![image-20231007102743482](assets/image-20231007102743482.png)

![image-20231005160150723](assets/image-20231005160150723.png)

![image-20231005160213602](assets/image-20231005160213602.png)

